{exp:channel:entries channel="secciones" limit="1"}
{imagen_de_fondo limit="1"}
{embed="includes/header" imagen="{image:url:large}" titulo="{title}"}
{/imagen_de_fondo}
{/exp:channel:entries}
<div class="book_container cover_container">
  <div id="cont" class="row">
    <div id="form_box_2_container" class="large-12 large-centered columns"> 
      <div id="form_box_2">
        <div class="row">
          <div id="title_reservation" class="large-12 columns">
            <div class="row">
              <div class="large-4 columns">
                <h3>NEW RESERVATION</h3>
              </div>
              <div class="large-4 large-offset-4 columns">
                <p class="phone">Phone reservations +511-440-6040</p>
              </div>
            </div>  
            <div class="row">
              <div class="large-9 large-centered columns">
                <form class="book_a_room search_again" action="/?/content/newreservation2" method="POST">
                  <input type="hidden" name="XID" value="{XID_HASH}" /> 
                  <div class="row">
                    {exp:get_post_vars parse="inward"}
                    <div class="large-3 columns">
                      <input type="text" id="check_in_date" name="check_in_date" placeholder="CHECK-IN" value="{post_check_in_date}">
                    </div>
                    <div class="large-3 columns">
                      <input type="text" id="check_out_date" name="check_out_date" placeholder="CHECK-OUT" value="{post_check_out_date}">
                    </div>
                    <div class="large-1 columns">
                      <label for="right-label" class="inline">Rooms</label>
                    </div>
                    <div class="large-2 columns">
                      <select name="room_number"  pattern="number" data-invalid="">
                        {if {post_room_number} == "1"}
                        <option selected value="1">1</option> 
                        {if:else}
                        <option value="1">1</option>
                        {/if}
                        {if {post_room_number} == "2"}
                        <option selected value="2">2</option> 
                        {if:else}
                        <option value="2">2</option>
                        {/if}
                        {if {post_room_number} == "3"}
                        <option selected value="3">3</option> 
                        {if:else}
                        <option value="3">3</option>
                        {/if}
                        {if {post_room_number} == "4"}
                        <option selected value="4">4</option> 
                        {if:else}
                        <option value="4">4</option>
                        {/if}
                        <option value="5">5+</option>
                      </select>
                    </div>
                     {/exp:get_post_vars}
                    <div class="large-3 columns end">
                      <input type="submit" class="button tiny send expand" value="search again">
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="large-12 columns">
            <div class="row" id="steps_list">
              <div class="large-9 large-centered columns text-center">
                <div class="row">
                  <div class="large-3 columns"><span class="circle active">1</span><p>SELECT ROOMS</p></div>
                  <div class="large-3 columns"><span class="circle">2</span><p>ADD SERVICE OPTIONS</p></div>
                  <div class="large-3 columns"><span class="circle">3</span><p>GUEST INFORMATION</p></div>
                  <div class="large-3 columns"><span class="circle last">4</span><p>CONFIRMATION</p></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="large-12 columns">
          {exp:get_post_vars parse="inward"}
            <!-- <h4 id="step_in_reservation">Room 1 of {post_room_number}</h4> -->
            <h4 id="step_in_reservation">select your first room</h4>
          {/exp:get_post_vars}
            <!-- <h4 id="step_in_reservation2">select your first room</h4> -->
          <div class="row" id="steps_list_rooms">
            <div class="large-5 columns">
              <div class="row">
                {exp:get_post_vars parse="inward"}
                  {if {post_room_number} == "1"}
                  <div class="large-2 columns end"><span id="first_circle" class="circle active last">1</span><p>ROOM</p></div>
                  
                  {/if}
                  {if {post_room_number} == "2"}
                  <div class="large-2 columns"><span id="first_circle" class="circle active">1</span><p>ROOM</p></div>
                  <div class="large-2 columns end"><span id="second_circle" class="circle last">2</span><p>ROOM</p></div>
                  {/if}
                  {if {post_room_number} == "3"}
                  <div class="large-2 columns"><span id="first_circle" class="circle active">1</span><p>ROOM</p></div>
                  <div class="large-2 columns"><span id="second_circle" class="circle">2</span><p>ROOM</p></div>
                  <div class="large-2 columns end"><span id="third_circle" class="circle last">3</span><p>ROOM</p></div>
                  {/if}
                  {if {post_room_number} == "4"}
                  <div class="large-2 columns"><span id="first_circle" class="circle active">1</span><p>ROOM</p></div>
                  <div class="large-2 columns"><span id="second_circle" class="circle">2</span><p>ROOM</p></div>
                  <div class="large-2 columns"><span id="third_circle" class="circle">3</span><p>ROOM</p></div>
                  <div class="large-2 columns end"><span id="fourth_circle" class="circle last">4</span><p>ROOM</p></div>
                  {/if}
                {/exp:get_post_vars}
              </div>
            </div>
          </div>
          </div>
          <form class="book_a_room main_form" action="/?/content/reserva" method="POST">
            <input type="hidden" name="XID" value="{XID_HASH}" />
              {exp:get_post_vars parse="inward"}
              {exp:infhotel:disponibilidadinicialhabitaciones_final
                fecha_checkin = "{post_check_in_date}"
                fecha_checkout = "{post_check_out_date}"
                rooms_num =  "{post_room_number}" 
              }
              {/exp:infhotel:disponibilidadinicialhabitaciones_final}
            {/exp:get_post_vars}
          </form>
        </div>
      </div>
    </div>  
  </div>  
</div>  
<div id="oceanView" class="reveal-modal medium" data-reveal>
  <ul class="gallery" data-orbit data-options="animation:slide; pause_on_hover:true; timer:false; bullets:false;">
    <li>
      <img src="http://chicamasurf.com/img/ocean_view.png" alt="">
    </li>
    <li class="active">
      <img src="http://chicamasurf.com/img/ocean_view.png" alt="">
    </li>
    <li>
      <img src="http://chicamasurf.com/img/ocean_view.png" alt="">
    </li>
  </ul>
  <a class="close-reveal-modal">&#215;</a>
</div>
<div id="gardenView" class="reveal-modal medium" data-reveal>
  <ul class="gallery" data-orbit data-options="animation:slide; pause_on_hover:true; timer:false; bullets:false;">
    <li>
      <img src="http://chicamasurf.com/img/addon1.png" alt="">
    </li>
    <li class="active">
      <img src="http://chicamasurf.com/img/addon1.png" alt="">
    </li>
    <li>
      <img src="http://chicamasurf.com/img/addon1.png" alt="">
    </li>
  </ul>
  <a class="close-reveal-modal">&#215;</a>
</div>
<div id="add_on">  
{exp:infhotel:reservation_3}
</div>
{embed="includes/footer"}
{exp:get_post_vars parse="inward"}
<script>
  function showIt(elem) {
      var el = document.getElementById(elem);
      el.scrollIntoView(true);
  }
  $(function() {
    num_hab = {post_room_number};
    $("#room1").hide();
    $("#room2").hide();
    $("#room3").hide();
    $("#room4").hide();
    $("#price_room1").hide();
    $("#price_room2").hide();
    $("#price_room3").hide();
    $("#price_room4").hide();
    $("#form_box_3_container").hide();
    hide_divs(num_hab,0);
      });
  $(function() {
    var amount = 0;
    var num_hab = {post_room_number};
    var checkin_date ="";
    var checkout_date ="";
    var checkin = ""+"{post_check_in_date}";
    var checkout = ""+"{post_check_out_date}" ;
    var simple_garden = 0;
    var doble_garden = 0;
    var triple_garden = 0;
    var simple_ocean = 0;
    var doble_ocean = 0;
    var triple_ocean = 0;
    var sumary = { };

    var d1 = checkin.substr(0, 2)+"-"+checkin.substr(3, 2)+"-"+checkin.substr(6, 4);
    d1 = d1.split("-");
    var dat1 = new Date(d1[2], parseFloat(d1[1])-1, parseFloat(d1[0]));
    var d2 = checkout.substr(0, 2)+"-"+checkout.substr(3, 2)+"-"+checkout.substr(6, 4);
    d2 = d2.split("-");
    var dat2 = new Date(d2[2], parseFloat(d2[1])-1, parseFloat(d2[0]));
    
    var fin = dat2.getTime() - dat1.getTime();
    var dias = Math.floor(fin / (1000 * 60 * 60 * 24))  

    checkin_date = checkin.substr(6, 4)+"-"+checkin.substr(3, 2)+"-"+checkin.substr(0, 2)+" 12:00:000";
    checkout_date = checkout.substr(6, 4)+"-"+checkout.substr(3, 2)+"-"+checkout.substr(0, 2)+" 12:00:000";
    var data = {
        "FLlegada": checkin_date,
          "FSalida": checkout_date,
          "HLlegada": checkin_date,
          "HSalida": checkout_date,
          "Habitaciones": {},
          "MObservacion": "",       
                "NPasajero": "0" ,
                "Pasajeros" : {}
    };
    cambio_costos('#guests_simple_garden0','#num_guest_simple_garden0','#cost_simple_garden0', "#type_hab_simple_garden0","#final_cost_simple_garden0");
    cambio_costos('#guests_simple_garden1','#num_guest_simple_garden1','#cost_simple_garden1',"#type_hab_simple_garden1","#final_cost_simple_garden1");
    cambio_costos('#guests_simple_garden2','#num_guest_simple_garden2','#cost_simple_garden2',"#type_hab_simple_garden2","#final_cost_simple_garden2");
    cambio_costos('#guests_simple_garden3','#num_guest_simple_garden3','#cost_simple_garden3',"#type_hab_simple_garden3","#final_cost_simple_garden3");
    cambio_costos('#guests_doble_garden0','#num_guest_doble_garden0','#cost_doble_garden0',"#type_hab_doble_garden0","#final_cost_doble_garden0");
    cambio_costos('#guests_doble_garden1','#num_guest_doble_garden1','#cost_doble_garden1',"#type_hab_doble_garden1","#final_cost_doble_garden1");
    cambio_costos('#guests_doble_garden2','#num_guest_doble_garden2','#cost_doble_garden2',"#type_hab_doble_garden2","#final_cost_doble_garden2");
    cambio_costos('#guests_doble_garden3','#num_guest_doble_garden3','#cost_doble_garden3',"#type_hab_doble_garden3","#final_cost_doble_garden3");
    cambio_costos('#guests_triple_garden0','#num_guest_triple_garden0','#cost_triple_garden0',"#type_hab_triple_garden0","#final_cost_triple_garden0");
    cambio_costos('#guests_triple_garden1','#num_guest_triple_garden1','#cost_triple_garden1',"#type_hab_triple_garden1","#final_cost_triple_garden1");
    cambio_costos('#guests_triple_garden2','#num_guest_triple_garden2','#cost_triple_garden2',"#type_hab_triple_garden2","#final_cost_triple_garden2");
    cambio_costos('#guests_triple_garden3','#num_guest_triple_garden3','#cost_triple_garden3',"#type_hab_triple_garden3","#final_cost_triple_garden3");
    cambio_costos('#guests_simple_ocean0','#num_guest_simple_ocean0','#cost_simple_ocean0', "#type_hab_simple_ocean0","#final_cost_simple_ocean0");
    cambio_costos('#guests_simple_ocean1','#num_guest_simple_ocean1','#cost_simple_ocean1',"#type_hab_simple_ocean1","#final_cost_simple_ocean1");
    cambio_costos('#guests_simple_ocean2','#num_guest_simple_ocean2','#cost_simple_ocean2',"#type_hab_simple_ocean2","#final_cost_simple_ocean2");
    cambio_costos('#guests_simple_ocean3','#num_guest_simple_ocean3','#cost_simple_ocean3',"#type_hab_simple_ocean3","#final_cost_simple_ocean3");
    cambio_costos('#guests_doble_ocean0','#num_guest_doble_ocean0','#cost_doble_ocean0',"#type_hab_doble_ocean0","#final_cost_doble_ocean0");
    cambio_costos('#guests_doble_ocean1','#num_guest_doble_ocean1','#cost_doble_ocean1',"#type_hab_doble_ocean1","#final_cost_doble_ocean1");
    cambio_costos('#guests_doble_ocean2','#num_guest_doble_ocean2','#cost_doble_ocean2',"#type_hab_doble_ocean2","#final_cost_doble_ocean2");
    cambio_costos('#guests_doble_ocean3','#num_guest_doble_ocean3','#cost_doble_ocean3',"#type_hab_doble_ocean3","#final_cost_doble_ocean3");
    cambio_costos('#guests_triple_ocean0','#num_guest_triple_ocean0','#cost_triple_ocean0',"#type_hab_triple_ocean0","#final_cost_triple_ocean0");
    cambio_costos('#guests_triple_ocean1','#num_guest_triple_ocean1','#cost_triple_ocean1',"#type_hab_triple_ocean1","#final_cost_triple_ocean1");
    cambio_costos('#guests_triple_ocean2','#num_guest_triple_ocean2','#cost_triple_ocean2',"#type_hab_triple_ocean2","#final_cost_triple_ocean2");
    cambio_costos('#guests_triple_ocean3','#num_guest_triple_ocean3','#cost_triple_ocean3',"#type_hab_triple_ocean3","#final_cost_triple_ocean3");
    reservar_hab(num_hab, '#add_room_simple_garden0', 1, 1,"#final_cost_simple_garden0","#full_request","#guests_simple_garden0","#purchase_amount");
    reservar_hab(num_hab, '#add_room_doble_garden0', 1, 2,"#final_cost_doble_garden0","#full_request","#guests_doble_garden0","#purchase_amount");
    reservar_hab(num_hab, '#add_room_triple_garden0', 1, 3,"#final_cost_triple_garden0","#full_request","#guests_triple_garden0","#purchase_amount");
    reservar_hab(num_hab, '#add_room_simple_garden1', 2, 1,"#final_cost_simple_garden1","#full_request","#guests_simple_garden1","#purchase_amount");
    reservar_hab(num_hab, '#add_room_doble_garden1', 2, 2,"#final_cost_doble_garden1","#full_request","#guests_doble_garden1","#purchase_amount");
    reservar_hab(num_hab, '#add_room_triple_garden1', 2, 3,"#final_cost_triple_garden1","#full_request","#guests_triple_garden1","#purchase_amount");
    reservar_hab(num_hab, '#add_room_simple_garden2', 3, 1,"#final_cost_simple_garden2","#full_request","#guests_simple_garden2","#purchase_amount");
    reservar_hab(num_hab, '#add_room_doble_garden2', 3, 2,"#final_cost_doble_garden2","#full_request","#guests_doble_garden2","#purchase_amount");
    reservar_hab(num_hab, '#add_room_triple_garden2', 3, 3,"#final_cost_triple_garden2","#full_request","#guests_triple_garden2","#purchase_amount");
    reservar_hab(num_hab, '#add_room_simple_garden3', 4, 1,"#final_cost_simple_garden3","#full_request","#guests_simple_garden3","#purchase_amount");
    reservar_hab(num_hab, '#add_room_doble_garden3', 4, 2,"#final_cost_doble_garden3","#full_request","#guests_doble_garden3","#purchase_amount");
    reservar_hab(num_hab, '#add_room_triple_garden3', 4, 3,"#final_cost_triple_garden3","#full_request","#guests_triple_garden3","#purchase_amount");
    reservar_hab(num_hab, '#add_room_simple_ocean0', 1, 4,"#final_cost_simple_ocean0","#full_request","#guests_simple_ocean0","#purchase_amount");
    reservar_hab(num_hab, '#add_room_doble_ocean0', 1, 5,"#final_cost_doble_ocean0","#full_request","#guests_doble_ocean0","#purchase_amount");
    reservar_hab(num_hab, '#add_room_triple_ocean0', 1, 6,"#final_cost_triple_ocean0","#full_request","#guests_triple_ocean0","#purchase_amount");
    reservar_hab(num_hab, '#add_room_simple_ocean1', 2, 4,"#final_cost_simple_ocean1","#full_request","#guests_simple_ocean1","#purchase_amount");
    reservar_hab(num_hab, '#add_room_doble_ocean1', 2, 5,"#final_cost_doble_ocean1","#full_request","#guests_doble_ocean1","#purchase_amount");
    reservar_hab(num_hab, '#add_room_triple_ocean1', 2, 6,"#final_cost_triple_ocean1","#full_request","#guests_triple_ocean1","#purchase_amount");
    reservar_hab(num_hab, '#add_room_simple_ocean2', 3, 4,"#final_cost_simple_ocean2","#full_request","#guests_simple_ocean2","#purchase_amount");
    reservar_hab(num_hab, '#add_room_doble_ocean2', 3, 5,"#final_cost_doble_ocean2","#full_request","#guests_doble_ocean2","#purchase_amount");
    reservar_hab(num_hab, '#add_room_triple_ocean2', 3, 6,"#final_cost_triple_ocean2","#full_request","#guests_triple_ocean2","#purchase_amount");
    reservar_hab(num_hab, '#add_room_simple_ocean3', 4, 4,"#final_cost_simple_ocean3","#full_request","#guests_simple_ocean3","#purchase_amount");
    reservar_hab(num_hab, '#add_room_doble_ocean3', 4, 5,"#final_cost_doble_ocean3","#full_request","#guests_doble_ocean3","#purchase_amount");
    reservar_hab(num_hab, '#add_room_triple_ocean3', 4, 6,"#final_cost_triple_ocean3","#full_request","#guests_triple_ocean3","#purchase_amount");
    


    function cambio_costos(select_box , encabezado , precio, hab, final_cost){
      var  tipo_de_hab = $(hab).text();
      $(select_box).change(function(){  
        if(tipo_de_hab=="GARDEN VIEW"){
          switch($( select_box ).val()){ 
            case "1":
              $(encabezado).html("One Guest");
              $(precio).html("USD 100/night");
              $(final_cost).val("100");
              break;
            case "2":
              $(encabezado).html("Two Guests");
              $(precio).html("USD 130/night");
              $(final_cost).val("130");
              break;
            case "3":
              $(encabezado).html("Three Guests");
              $(precio).html("USD 160/night");
              $(final_cost).val("160");
              break;
            case "4":
              break;
          }
        }
        if(tipo_de_hab=="OCEAN VIEW"){
          switch($(select_box).val()){
            case "1":
              $(encabezado).html("One Guest");
              $(precio).html("USD 110/night");
              $(final_cost).val("110");
              break;
            case "2":
              $(encabezado).html("Two Guests");
              $(precio).html("USD 140/night");
              $(final_cost).val("140");
              break;
            case "3":
              $(encabezado).html("Three Guests");
              $(precio).html("USD 180/night");
              $(final_cost).val("180");
              break;
            case "4":
              break;
          }
        }
      });
    }

  function reservar_hab (rooms_num, buttom, next_div, type_hab, final_cost, request, select_box, purchase_amount ){
  var orden = next_div - 1 ;
  var summary_cost_final = "";
  var summary_room = "";
  var summary_cost = "";

  switch(type_hab){
      case 1:
          $(buttom).click(function(){
          showIt('step_in_reservation');  
          $("body").addClass("overlay_active"); 
          setTimeout(function(){$("body").removeClass("overlay_active")},450);
          var valor = $(select_box).val();
          simple_garden = simple_garden + 1;
          amount = amount + parseInt($(final_cost).val())*100;
          var total_summary = amount;
          $("#total_summary").html("TOTAL <span>$ "+parseInt(total_summary)*dias/100+"</span>");
          $("#total_summary_per_night").html("TOTAL PER NIGHT <span>$ "+parseInt(total_summary)/(100)+"</span>");
          //$("#total_summary_per_room").html("TOTAL PER ROOM <span>$ "+parseFloat((parseInt(total_summary)*dias)/(rooms_num*100))+"</span>");
          $("#summary_input").val($("#reserva_summary").html());
          $("#rooms_input").val(amount*dias);
          summary_room = orden+1;
          summary_cost = $(final_cost).val();
          switch(summary_cost){
            case "100":
              var temp = {
                "TCodigoHabitacion" : "rmsg01"
              };
              //summary_cost_final="Garden View Single <br>(1 person) for "+dias+" nights <span>$ "+(100*dias)+"</span>";
              summary_cost_final="Garden View Single <br>(1 person) <span>$ "+(100)+" /night</span>";
            break;
            case "130":
              var temp = {
                "TCodigoHabitacion" : "rmdg01"
              };
              //summary_cost_final="Garden View Double <br>(2 persons) for "+dias+" nights <span>$ "+(130*dias)+"</span>";
              summary_cost_final="Garden View Double <br>(2 persons) <span>$ "+(130)+" /night</span>";
            break;
            case "160":
              var temp = {
                "TCodigoHabitacion" : "rmtg01"
              };
              //summary_cost_final="Garden View Triple <br>(3 persons) for "+dias+" nights <span>$ "+(160*dias)+"</span>";
              summary_cost_final="Garden View Triple <br>(3 persons) <span>$ "+(160)+" /night</span>";
            break;
          }
          $("#title_room"+summary_room+"_summary").html("ROOM "+summary_room+":");
          $("#cost_room"+summary_room+"_summary").html(summary_cost_final);
          hide_divs(rooms_num, next_div);
          data["Habitaciones"][orden]=temp;
          sumary[orden]=temp;
          data["NPasajero"] = parseInt(data["NPasajero"]) + parseInt(valor);
          $("#numero_de_personas").val(data["NPasajero"]);
          //$("#total_summary_per_person").html("TOTAL PER PERSON <span>$ "+parseFloat((parseInt(total_summary)*dias)/(parseInt(data["NPasajero"])*100))+"</span>");
          var send = JSON.stringify(data);
          send = send.replace(/{/gi, "$");
          send = send.replace(/}/gi, "&");  
          send = send.replace(/"/gi, "(");
          send = send.replace(/:/gi, ")");
          send = send.replace(/ /gi, "?");
          send = send.replace(/,/gi, "¿");
          $(request).val(send);
          $(purchase_amount).val(amount);
          $("#rooms_input").val(amount*dias);
          });
          
          break;
      case 2:
          $(buttom).click(function(){
          showIt('step_in_reservation');
          $("body").addClass("overlay_active"); 
          setTimeout(function(){$("body").removeClass("overlay_active")},450);
          var valor = $(select_box).val();
          doble_garden = doble_garden + 1;
          amount = amount + parseInt($(final_cost).val())*100;
          var total_summary = amount;
          $("#total_summary").html("TOTAL <span>$ "+parseInt(total_summary)*dias/100+"</span>");
          $("#total_summary_per_night").html("TOTAL PER NIGHT <span>$ "+parseInt(total_summary)/(100)+"</span>");
          //$("#total_summary_per_room").html("TOTAL PER ROOM <span>$ "+parseFloat((parseInt(total_summary)*dias)/(rooms_num*100))+"</span>");
          $("#summary_input").val($("#reserva_summary").html());
          $("#rooms_input").val(amount*dias);
          summary_room = orden+1;
          summary_cost = $(final_cost).val();
          switch(summary_cost){
            case "100":
              var temp = {
                "TCodigoHabitacion" : "rmsg02"
              };
              //summary_cost_final="Garden View Single <br>(1 person) for "+dias+" nights <span>$ "+(100*dias)+"</span>";
              summary_cost_final="Garden View Single <br>(1 person) <span>$ "+(100)+" /night</span>";
            break;
            case "130":
              var temp = {
                "TCodigoHabitacion" : "rmdg02"
              };
              //summary_cost_final="Garden View Double <br>(2 persons) for "+dias+" nights <span>$ "+(130*dias)+"</span>";
              summary_cost_final="Garden View Double <br>(2 persons) <span>$ "+(130)+" /night</span>";
            break;
            case "160":
              var temp = {
                "TCodigoHabitacion" : "rmtg02"
              };
              //summary_cost_final="Garden View Triple <br>(3 persons) for "+dias+" nights <span>$ "+(160*dias)+"</span>";
              summary_cost_final="Garden View Triple <br>(3 persons) <span>$ "+(160)+" /night</span>";
            break;
          }
          $("#title_room"+summary_room+"_summary").html("ROOM "+summary_room+":");
          $("#cost_room"+summary_room+"_summary").html(summary_cost_final);
          hide_divs(rooms_num, next_div);
          data["Habitaciones"][orden]=temp;
          sumary[orden]=temp;
          data["NPasajero"] = parseInt(data["NPasajero"]) + parseInt(valor);
          $("#numero_de_personas").val(data["NPasajero"]);
          //$("#total_summary_per_person").html("TOTAL PER PERSON <span>$ "+parseFloat((parseInt(total_summary)*dias)/(parseInt(data["NPasajero"])*100))+"</span>");
            var send = JSON.stringify(data);
           send = send.replace(/{/gi, "$");
          send = send.replace(/}/gi, "&");  
          send = send.replace(/"/gi, "(");
          send = send.replace(/:/gi, ")");
          send = send.replace(/ /gi, "?");
          send = send.replace(/,/gi, "¿");
          $(request).val(send);
          $(purchase_amount).val(amount);
          $("#rooms_input").val(amount*dias);
          });
          break;
      case 3:
          $(buttom).click(function(){
          showIt('step_in_reservation');  
          $("body").addClass("overlay_active"); 
          setTimeout(function(){$("body").removeClass("overlay_active")},450);
          var valor = $(select_box).val();
          triple_garden =triple_garden + 1;
          amount = amount + parseInt($(final_cost).val())*100;
          var total_summary = amount;
          $("#total_summary").html("TOTAL <span>$ "+parseInt(total_summary)*dias/100+"</span>");
          $("#total_summary_per_night").html("TOTAL PER NIGHT <span>$ "+parseInt(total_summary)/(100)+"</span>");
          //$("#total_summary_per_room").html("TOTAL PER ROOM <span>$ "+Math.round((parseInt(total_summary)*dias)/(rooms_num*100) * 100) / 100+"</span>");
          $("#summary_input").val($("#reserva_summary").html());
          $("#rooms_input").val(amount*dias);
          summary_room = orden+1;
          summary_cost = $(final_cost).val();
          switch(summary_cost){
            case "100":
              var temp = {
                "TCodigoHabitacion" : "rmsg03"
              };
              //summary_cost_final="Garden View Single <br>(1 person) for "+dias+" nights <span>$ "+(100*dias)+"</span>";
              summary_cost_final="Garden View Single <br>(1 person) <span>$ "+(100)+" /night</span>";
            break;
            case "130":
              var temp = {
                "TCodigoHabitacion" : "rmdg03"
              };
              //summary_cost_final="Garden View Double <br>(2 persons) for "+dias+" nights <span>$ "+(130*dias)+"</span>";
              summary_cost_final="Garden View Double <br>(2 persons) <span>$ "+(130)+" /night</span>";
            break;
            case "160":
              var temp = {
                "TCodigoHabitacion" : "rmtg03"
              };
              //summary_cost_final="Garden View Triple <br>(3 persons) for "+dias+" nights <span>$ "+(160*dias)+"</span>";
              summary_cost_final="Garden View Triple <br>(3 persons) <span>$ "+(160)+" /night</span>";
            break;
          }
          $("#title_room"+summary_room+"_summary").html("ROOM "+summary_room+":");
          $("#cost_room"+summary_room+"_summary").html(summary_cost_final);
          hide_divs(rooms_num, next_div);
          data["Habitaciones"][orden]=temp;
          sumary[orden]=temp;
          data["NPasajero"] = parseInt(data["NPasajero"]) + parseInt(valor);
          $("#numero_de_personas").val(data["NPasajero"]);
          //$("#total_summary_per_person").html("TOTAL PER PERSON <span>$ "+parseFloat((parseInt(total_summary)*dias)/(parseInt(data["NPasajero"])*100))+"</span>");
          var send = JSON.stringify(data);
           send = send.replace(/{/gi, "$");
          send = send.replace(/}/gi, "&");  
          send = send.replace(/"/gi, "(");
          send = send.replace(/:/gi, ")");
          send = send.replace(/ /gi, "?");
          send = send.replace(/,/gi, "¿");
          $(request).val(send);
          $(purchase_amount).val(amount);
          $("#rooms_input").val(amount*dias);
          });
          break;
      case 4:
          $(buttom).click(function(){
          showIt('step_in_reservation');  
          $("body").addClass("overlay_active"); 
          setTimeout(function(){$("body").removeClass("overlay_active")},450);
          var valor = $(select_box).val();
          simple_ocean =simple_ocean + 1;
          amount = amount + parseInt($(final_cost).val())*100;
          var total_summary = amount;
          $("#total_summary").html("TOTAL <span>$ "+parseInt(total_summary)*dias/100+"</span>");
          $("#total_summary_per_night").html("TOTAL PER NIGHT <span>$ "+parseInt(total_summary)/(100)+"</span>");
          //$("#total_summary_per_room").html("TOTAL PER ROOM <span>$ "+parseFloat((parseInt(total_summary)*dias)/(rooms_num*100))+"</span>");
          $("#summary_input").val($("#reserva_summary").html());
          $("#rooms_input").val(amount*dias);
          summary_room = orden+1;
          summary_cost = $(final_cost).val();
          switch(summary_cost){
            case "110":
              var temp = {
                "TCodigoHabitacion" : "rmso05"
              };
              //summary_cost_final="Ocean View Single <br>(1 person) for "+dias+" nights <span>$ "+(110*dias)+"</span>";
              summary_cost_final="Ocean View Single <br>(1 person) <span>$ "+(110)+" /night</span>";
            break;
            case "140":
              var temp = {
                "TCodigoHabitacion" : "rmdo05"
              };
              //summary_cost_final="Ocean View Double <br>(2 persons) for "+dias+" nights <span>$ "+(140*dias)+"</span>";
              summary_cost_final="Ocean View Double <br>(2 persons) <span>$ "+(140)+" /night</span>";
            break;
            case "180":
              var temp = {
                "TCodigoHabitacion" : "rmto05"
              };
              //summary_cost_final="Ocean View Triple <br>(3 persons) for "+dias+" nights <span>$ "+(180*dias)+"</span>";
              summary_cost_final="Ocean View Triple <br>(3 persons) <span>$ "+(180)+" /night</span>";
            break;
          }
          $("#title_room"+summary_room+"_summary").html("ROOM "+summary_room+":");
          $("#cost_room"+summary_room+"_summary").html(summary_cost_final);
          hide_divs(rooms_num, next_div);
          data["Habitaciones"][orden]=temp;
          sumary[orden]=temp;
          data["NPasajero"] = parseInt(data["NPasajero"]) + parseInt(valor);
          $("#numero_de_personas").val(data["NPasajero"]);
          //$("#total_summary_per_person").html("TOTAL PER PERSON <span>$ "+parseFloat((parseInt(total_summary)*dias)/(parseInt(data["NPasajero"])*100))+"</span>");
          var send = JSON.stringify(data);
           send = send.replace(/{/gi, "$");
          send = send.replace(/}/gi, "&");  
          send = send.replace(/"/gi, "(");
          send = send.replace(/:/gi, ")");
          send = send.replace(/ /gi, "?");
          send = send.replace(/,/gi, "¿");
          $(request).val(send);
          $(purchase_amount).val(amount);
          $("#rooms_input").val(amount*dias);
          });
          break;
      case 5:
          $(buttom).click(function(){
          showIt('step_in_reservation');  
          $("body").addClass("overlay_active"); 
          setTimeout(function(){$("body").removeClass("overlay_active")},450);
          var valor = $(select_box).val();
          doble_ocean =doble_ocean+ 1;
          amount = amount + parseInt($(final_cost).val())*100;
          var total_summary = amount;
          $("#total_summary").html("TOTAL <span>$ "+parseInt(total_summary)*dias/100+"</span>");
          $("#total_summary_per_night").html("TOTAL PER NIGHT <span>$ "+parseInt(total_summary)/(100)+"</span>");
          //$("#total_summary_per_room").html("TOTAL PER ROOM <span>$ "+parseFloat((parseInt(total_summary)*dias)/(rooms_num*100))+"</span>");
          $("#summary_input").val($("#reserva_summary").html());
          $("#rooms_input").val(amount*dias);
          summary_room = orden+1;
          summary_cost = $(final_cost).val();
          switch(summary_cost){
            case "110":
              var temp = {
                "TCodigoHabitacion" : "rmso06"
              };
              //summary_cost_final="Ocean View Single <br>(1 person) for "+dias+" nights <span>$ "+(110*dias)+"</span>";
              summary_cost_final="Ocean View Single <br>(1 person) <span>$ "+(110)+" /night</span>";
            break;
            case "140":
              var temp = {
                "TCodigoHabitacion" : "rmdo06"
              };
              //summary_cost_final="Ocean View Double <br>(2 persons) for "+dias+" nights <span>$ "+(140*dias)+"</span>";
              summary_cost_final="Ocean View Double <br>(2 persons) <span>$ "+(140)+" /night</span>";
            break;
            case "180":
              var temp = {
                "TCodigoHabitacion" : "rmto06"
              };
              //summary_cost_final="Ocean View Triple <br>(3 persons) for "+dias+" nights <span>$ "+(180*dias)+"</span>";
              summary_cost_final="Ocean View Triple <br>(3 persons) <span>$ "+(180)+" /night</span>";
            break;
          }
          $("#title_room"+summary_room+"_summary").html("ROOM "+summary_room+":");
          $("#cost_room"+summary_room+"_summary").html(summary_cost_final);
          hide_divs(rooms_num, next_div);
          data["Habitaciones"][orden]=temp;
          sumary[orden]=temp;
          data["NPasajero"] = parseInt(data["NPasajero"]) + parseInt(valor);
          $("#numero_de_personas").val(data["NPasajero"]);
          //$("#total_summary_per_person").html("TOTAL PER PERSON <span>$ "+parseFloat((parseInt(total_summary)*dias)/(parseInt(data["NPasajero"])*100))+"</span>");
          var send = JSON.stringify(data);
           send = send.replace(/{/gi, "$");
          send = send.replace(/}/gi, "&");  
          send = send.replace(/"/gi, "(");
          send = send.replace(/:/gi, ")");
          send = send.replace(/ /gi, "?");
          send = send.replace(/,/gi, "¿");
          $(request).val(send);
          $(purchase_amount).val(amount);
          $("#rooms_input").val(amount*dias);
          
      });
          break;
      case 6:
          $(buttom).click(function(){
          showIt('step_in_reservation');
          // showIt('steps_list');
          $("body").addClass("overlay_active"); 
          setTimeout(function(){$("body").removeClass("overlay_active")},450);
          var valor = $(select_box).val();
          triple_ocean =triple_ocean + 1;
          amount = amount + parseInt($(final_cost).val())*100;
          var total_summary = amount;
          $("#total_summary").html("TOTAL <span>$ "+parseInt(total_summary)*dias/100+"</span>");
          $("#total_summary_per_night").html("TOTAL PER NIGHT <span>$ "+parseInt(total_summary)/(100)+"</span>");
          //$("#total_summary_per_room").html("TOTAL PER ROOM <span>$ "+parseFloat((parseInt(total_summary)*dias)/(rooms_num*100))+"</span>");
          $("#summary_input").val($("#reserva_summary").html());
          $("#rooms_input").val(amount*dias);
          summary_room = orden+1;
          summary_cost = $(final_cost).val();
          switch(summary_cost){
            case "110":
              var temp = {
                "TCodigoHabitacion" : "rmso07"
              };
              //summary_cost_final="Ocean View Single <br>(1 person) for "+dias+" nights <span>$ "+(110*dias)+"</span>";
              summary_cost_final="Ocean View Single <br>(1 person) <span>$ "+(110)+" /night</span>";
            break;
            case "140":
              var temp = {
                "TCodigoHabitacion" : "rmdo07"
              };
              //summary_cost_final="Ocean View Double <br>(2 persons) for "+dias+" nights <span>$ "+(140*dias)+"</span>";
              summary_cost_final="Ocean View Double <br>(2 persons) <span>$ "+(140)+" /night</span>";
            break;
            case "180":
              var temp = {
                "TCodigoHabitacion" : "rmto07"
              };
              //summary_cost_final="Ocean View Triple <br>(3 persons) for "+dias+" nights <span>$ "+(180*dias)+"</span>";
              summary_cost_final="Ocean View Triple <br>(3 persons) <span>$ "+(180)+" /night</span>";
            break;
          }
          $("#title_room"+summary_room+"_summary").html("ROOM "+summary_room+":");
          $("#cost_room"+summary_room+"_summary").html(summary_cost_final);
          hide_divs(rooms_num, next_div);
          data["Habitaciones"][orden]=temp;
          sumary[orden]=temp;
          data["NPasajero"] = parseInt(data["NPasajero"]) + parseInt(valor);
          $("#numero_de_personas").val(data["NPasajero"]);
          //$("#total_summary_per_person").html("TOTAL PER PERSON <span>$ "+parseFloat((parseInt(total_summary)*dias)/(parseInt(data["NPasajero"])*100))+"</span>");
          var send = JSON.stringify(data);
          send = send.replace(/{/gi, "$");
          send = send.replace(/}/gi, "&");  
          send = send.replace(/"/gi, "(");
          send = send.replace(/:/gi, ")");
          send = send.replace(/ /gi, "?");
          send = send.replace(/,/gi, "¿");
          $(request).val(send);
          $(purchase_amount).val(amount);
          $("#rooms_input").val(amount*dias);
          });
          break;
      } 
  }
});

  function add_ons_click(sumary, input_serial, serial, text){
    var roomnum = ""+"{post_room_number}";
    var checkin = ""+"{post_check_in_date}";
    var checkout = ""+"{post_check_out_date}" ;
    var d1 = checkin.substr(0, 2)+"-"+checkin.substr(3, 2)+"-"+checkin.substr(6, 4);
    d1 = d1.split("-");
    var dat1 = new Date(d1[2], parseFloat(d1[1])-1, parseFloat(d1[0]));
    var d2 = checkout.substr(0, 2)+"-"+checkout.substr(3, 2)+"-"+checkout.substr(6, 4);
    d2 = d2.split("-");
    var dat2 = new Date(d2[2], parseFloat(d2[1])-1, parseFloat(d2[0]));
    var total_summary = $("#rooms_input").val();
    var fin = dat2.getTime() - dat1.getTime();
    var dias = Math.floor(fin / (1000 * 60 * 60 * 24));
    var guests = $("#numero_de_personas").val();
    $("#"+sumary).html(text);
    $(input_serial).val(serial);
    $("#summary_input").val($("#reserva_summary").html());
    //$("#total_summary_per_room").html("TOTAL PER ROOM <span>$ "+parseFloat((parseInt(total_summary)*dias)/(parseInt(roomnum)*100))+"</span>");
    //$("#total_summary_per_person").html("TOTAL PER PERSON <span>$ "+parseFloat((parseInt(total_summary)*dias)/(parseInt(guests)*100))+"</span>");
    console.log("esta funcionando add_ons_click --- guests: "+guests);
  }

  function add_ons_dropdown(encabezado, encabezado_html, input, input_val, check_box, purchase_amount, sumary, text, input_serial, serial){
    var roomnum = ""+"{post_room_number}";
    var checkin = ""+"{post_check_in_date}";
    var checkout = ""+"{post_check_out_date}" ;
    var d1 = checkin.substr(0, 2)+"-"+checkin.substr(3, 2)+"-"+checkin.substr(6, 4);
    d1 = d1.split("-");
    var dat1 = new Date(d1[2], parseFloat(d1[1])-1, parseFloat(d1[0]));
    var d2 = checkout.substr(0, 2)+"-"+checkout.substr(3, 2)+"-"+checkout.substr(6, 4);
    d2 = d2.split("-");
    var dat2 = new Date(d2[2], parseFloat(d2[1])-1, parseFloat(d2[0]));
    
    var fin = dat2.getTime() - dat1.getTime();
    var dias = Math.floor(fin / (1000 * 60 * 60 * 24));
    $("#num_dias").val(dias);
    var guests = $("#numero_de_personas").val();
    $(encabezado).html(encabezado_html);
    $(input).val(input_val);
    if($(check_box).is(":checked")){
      $(purchase_amount).val( parseInt($(purchase_amount).val()) + parseInt($(input).val()) );
      $("#rooms_input").val( parseInt($("#rooms_input").val()) + parseInt($(input).val()) );
      var total_summary = $("#rooms_input").val();
      $("#total_summary").html("TOTAL <span>$ "+parseInt(total_summary)/100+"</span>");
      $("#total_summary_per_night").html("TOTAL PER NIGHT <span>$ "+parseInt(total_summary)/(100)+"</span>");
      $("#summary_input").val($("#reserva_summary").html());
      $("#"+sumary).html(text);
      $(input_serial).val(serial);
      $("#summary_input").val($("#reserva_summary").html());
      //$("#total_summary_per_room").html("TOTAL PER ROOM <span>$ "+parseFloat((parseInt(total_summary)*dias)/(parseInt(roomnum)*100))+"</span>");
      //$("#total_summary_per_person").html("TOTAL PER PERSON <span>$ "+parseFloat((parseInt(total_summary)*dias)/(parseInt(guests)*100))+"</span>");
      console.log("esta funcionando add_ons_click --- guests: "+guests);
    }
  }

  function agregar_costos_addons(buttom, check_box, input, purchase_amount, sumary, encabezado){

    var checkin = ""+"{post_check_in_date}";
    var checkout = ""+"{post_check_out_date}" ;
    var d1 = checkin.substr(0, 2)+"-"+checkin.substr(3, 2)+"-"+checkin.substr(6, 4);
    d1 = d1.split("-");
    var dat1 = new Date(d1[2], parseFloat(d1[1])-1, parseFloat(d1[0]));
    var d2 = checkout.substr(0, 2)+"-"+checkout.substr(3, 2)+"-"+checkout.substr(6, 4);
    d2 = d2.split("-");
    var dat2 = new Date(d2[2], parseFloat(d2[1])-1, parseFloat(d2[0]));
    
    var fin = dat2.getTime() - dat1.getTime();
    var dias = Math.floor(fin / (1000 * 60 * 60 * 24));

    $("#num_dias").val(dias);
    $("#dias_num").html("# NIGHTS <span>"+dias+"</span>");

    var cost_summary = "";
    $("#"+sumary).html("");
    $(check_box).prop("checked", false);
    $(buttom).removeClass("active");
    $(buttom).click(function( e ){
      e.preventDefault();
      if($(check_box).is(":checked")) {
        if(sumary=="lunch_and_dinner_summary"){
          $("#"+sumary).html("");
          $("#lunch_and_dinner_serial").val("");
        }
        else{
          if(sumary=="transport_summary"){
            $("#"+sumary).html("");
            $("#transport_serial").val("");
          }
          else{
            if(sumary=="tow_back_service_summary"){
            $("#"+sumary).html("");
            $("#tow_back_service_serial").val("");
            }
          }
        }
        $(check_box).prop("checked", false);
        $(buttom).removeClass("active");
        $(buttom).html("add"); //select all checkboxes with class "checkbox1" 
        var total_summary = parseInt($("#rooms_input").val()) - parseInt($(input).val());
        $("#rooms_input").val( parseInt($("#rooms_input").val()) - parseInt($(input).val()) );
        $(purchase_amount).val( parseInt($(purchase_amount).val()) - parseInt($(input).val()) );
        $("#total_summary").html("TOTAL <span>$ "+parseInt(total_summary)/100+"</span>");
        $("#total_summary_per_night").html("TOTAL PER NIGHT <span>$ "+parseInt(total_summary)/(100)+"</span>");
        $("#summary_input").val($("#reserva_summary").html());      
      }
      else{
        $(check_box).prop("checked", true);
        $(buttom).html("added");
        $(buttom).addClass("active"); //deselect all checkboxes with class "checkbox1"  
        if(sumary == "lunch_and_dinner_summary"){
          switch($("#encabezado_lunch_and_dinner").html()){
            case "$60 /night":
            add_ons_click(sumary,"#lunch_and_dinner_serial", "adld01","Lunch And Dinner <br>(1 person) <span>$60 /night</span>");
            break;
            case "$120 /night":
            add_ons_click(sumary,"#lunch_and_dinner_serial", "adld02","Lunch And Dinner <br>(2 persons) <span>$120 /night</span>");
            break;
            case "$180 /night":
            add_ons_click(sumary,"#lunch_and_dinner_serial", "adld03","Lunch And Dinner <br>(3 persons) <span>$180 /night</span>");
            break;
            case "$240 /night":
            add_ons_click(sumary,"#lunch_and_dinner_serial", "adld04","Lunch And Dinner <br>(4 persons) <span>$240 /night</span>");
            break;
            case "$300 /night":
            add_ons_click(sumary,"#lunch_and_dinner_serial", "adld05","Lunch And Dinner <br>(5 persons) <span>$300 /night</span>");
            break;
            case "$360 /night":
            add_ons_click(sumary,"#lunch_and_dinner_serial", "adld06","Lunch And Dinner <br>(6 persons) <span>$360 /night</span>");
            break;
            case "$420 /night":
            add_ons_click(sumary,"#lunch_and_dinner_serial", "adld07","Lunch And Dinner <br>(7 persons) <span>$420 /night</span>");
            break;
            case "$480 /night":
            add_ons_click(sumary,"#lunch_and_dinner_serial", "adld08","Lunch And Dinner <br>(8 persons) <span>$480 /night</span>");
            break;
            case "$540 /night":
            add_ons_click(sumary,"#lunch_and_dinner_serial", "adld09","Lunch And Dinner <br>(9 persons) <span>$540 /night</span>");
            break;
            case "$600 /night":
            add_ons_click(sumary,"#lunch_and_dinner_serial", "adld10","Lunch And Dinner <br>(10 person) <span>$600 /night</span>");
            break;
            case "$660 /night":
            add_ons_click(sumary,"#lunch_and_dinner_serial", "adld11","Lunch And Dinner <br>(11 person) <span>$660 /night</span>");
            break;
            case "$720 /night":
           add_ons_click(sumary,"#lunch_and_dinner_serial", "adld12","Lunch And Dinner <br>(12 person) <span>$720 /night</span>");
            break;
          }
        }
        else{
          if(sumary == "transport_summary"){
            switch($("#encabezado_transport").html()){
              case "$48 one-time":
              add_ons_click(sumary,"#transport_serial","adtp01","Transport <br>(1 person) <span>$48 one-time</span>");
              break;
              case "$60 one-time":
              add_ons_click(sumary,"#transport_serial","adtp02","Transport <br>(2 persons) <span>$60 one-time</span>");
              break;
              case "$75 one-time":
              add_ons_click(sumary,"#transport_serial","adtp03","Transport <br>(3 persons) <span>$75 one-time</span>");
              break;
              case "$100 one-time":
              add_ons_click(sumary,"#transport_serial","adtp04","Transport <br>(4 persons) <span>$100 one-time</span>");
              break;
              case "$100 one-time":
              add_ons_click(sumary,"#transport_serial","adtp05","Transport <br>(5 persons) <span>$100 one-time</span>");
              break;
              case "$102 one-time":
              add_ons_click(sumary,"#transport_serial","adtp06","Transport <br>(6 persons) <span>$102 one-time</span>");
              break;
              case "$150 one-time":
              add_ons_click(sumary,"#transport_serial","adtp07","Transport <br>(7 persons) <span>$150 one-time</span>");
              break;
              case "$162 one-time":
              add_ons_click(sumary,"#transport_serial","adtp08","Transport <br>(8 persons) <span>$162 one-time</span>");
              break;
              case "$177 one-time":
              add_ons_click(sumary,"#transport_serial","adtp09","Transport <br>(9 persons) <span>$177 one-time</span>");
              break;
              case "$202 one-time":
              add_ons_click(sumary,"#transport_serial","adtp10","Transport <br>(10 persons) <span>$202 one-time</span>");
              break;
              case "$202 one-time":
              add_ons_click(sumary,"#transport_serial","adtp11","Transport <br>(11 persons) <span>$202 one-time</span>");
              break;
              case "$204 one-time":
              add_ons_click(sumary,"#transport_serial","adtp12","Transport <br>(12 persons) <span>$204 one-time</span>");
              break;
            }
          }
          else{
            if(sumary == "tow_back_service_summary"){
              switch($("#encabezado_tow_back_service").html()){
              case "$30 one-time":
              add_ons_click(sumary,"#tow_back_service_serial","adzc01","Tow back service <br>(1 person) <span>$30 one-time</span>");
              break;
              case "$60 one-time":
              add_ons_click(sumary,"#tow_back_service_serial","adzc02","Tow back service <br>(2 persons) <span>$60 one-time</span>");
              break;
              case "$90 one-time":
              add_ons_click(sumary,"#tow_back_service_serial","adzc03","Tow back service <br>(3 persons) <span>$90 one-time</span>");
              break;
              case "$120 one-time":
              add_ons_click(sumary,"#tow_back_service_serial","adzc04","Tow back service <br>(4 persons) <span>$120 one-time</span>");
              break;
              case "$150 one-time":
              add_ons_click(sumary,"#tow_back_service_serial","adzc05","Tow back service <br>(5 persons) <span>$150 one-time</span>");
              break;
              case "$180 one-time":
              add_ons_click(sumary,"#tow_back_service_serial","adzc06","Tow back service <br>(6 persons) <span>$180 one-time</span>");
              break;
              case "$210 one-time":
              add_ons_click(sumary,"#tow_back_service_serial","adzc07","Tow back service <br>(7 persons) <span>$210 one-time</span>");
              break;
              case "$240 one-time":
              add_ons_click(sumary,"#tow_back_service_serial","adzc08","Tow back service <br>(8 persons) <span>$240 one-time</span>");
              break;
              case "$270 one-time":
              add_ons_click(sumary,"#tow_back_service_serial","adzc09","Tow back service <br>(9 persons) <span>$270 one-time</span>");
              break;
              case "$300 one-time":
              add_ons_click(sumary,"#tow_back_service_serial","adzc10","Tow back service <br>(10 persons) <span>$300 one-time</span>");
              break;
              case "$330 one-time":
              add_ons_click(sumary,"#tow_back_service_serial","adzc11","Tow back service <br>(11 persons) <span>$330 one-time</span>");
              break;
              case "$360 one-time":
              add_ons_click(sumary,"#tow_back_service_serial","adzc12","Tow back service <br>(12 persons) <span>$360 one-time</span>");
              break;
              }
            }
          }
        }
        var total_summary = parseInt($("#rooms_input").val()) + parseInt($(input).val());
        $("#rooms_input").val( parseInt($("#rooms_input").val()) + parseInt($(input).val()) );
        $(purchase_amount).val( parseInt($(purchase_amount).val()) + parseInt($(input).val()) );
        $("#total_summary").html("TOTAL <span>$ "+parseInt(total_summary)/100+"</span>");
        $("#total_summary_per_night").html("TOTAL PER NIGHT <span>$ "+parseInt(total_summary)/(100)+"</span>");
        $("#summary_input").val($("#reserva_summary").html());
      }
    });
  }

  function cambio_costos_addons(select_box, check_box, encabezado, input, purchase_amount, sumary){
    switch(sumary){
      case "lunch_and_dinner_summary":
        $(encabezado).html("$60 /night");
        $(input).val("6000");
      break;
      case "transport_summary":
        $(encabezado).html("$48 one-time");
        $(input).val("4800");
      break;
      case "tow_back_service_summary":
        $(encabezado).html("$30 one-time");
        $(input).val("3000");
      break;
    }
    $(select_box).change(function(){
      if($(check_box).is(":checked")){
        $(purchase_amount).val( parseInt($(purchase_amount).val()) - parseInt($(input).val()) );
        $("#rooms_input").val( parseInt($("#rooms_input").val()) - parseInt($(input).val()) );
      }
      switch($(select_box).val()){ 
        case "1":
          switch(sumary){
            case "lunch_and_dinner_summary":
              add_ons_dropdown(encabezado,"$60 /night", input,"6000", check_box, purchase_amount, sumary,"Lunch And Dinner <br>(1 person)<span>$60 /night</span>","#lunch_and_dinner_serial","adld01");
            break;
            case "transport_summary":
              add_ons_dropdown(encabezado,"$48 one-time", input,"4800", check_box, purchase_amount, sumary,"Transport <br>(1 person)<span>$48 one-time</span>","#transport_serial","adtp01");
            break;
            case "tow_back_service_summary":
              add_ons_dropdown(encabezado,"$30 one-time", input,"3000", check_box, purchase_amount, sumary,"Tow back service <br>(1 person)<span>$30 one-time</span>","#tow_back_service_serial","adzc01");
            break;
          }
          break;
        case "2":
          switch(sumary){
            case "lunch_and_dinner_summary":
              add_ons_dropdown(encabezado,"$120 /night", input,"12000", check_box, purchase_amount, sumary,"Lunch And Dinner <br>(2 persons)<span>$120 /night</span>","#lunch_and_dinner_serial","adld02");
            break;
            case "transport_summary":
              add_ons_dropdown(encabezado,"$60 one-time", input,"6000", check_box, purchase_amount, sumary,"Transport <br>(2 persons)<span>$60 one-time</span>","#transport_serial","adtp02");
            break;
            case "tow_back_service_summary":
              add_ons_dropdown(encabezado,"$60 one-time", input,"6000", check_box, purchase_amount, sumary,"Tow back service <br>(2 persons)<span>$60 one-time</span>","#tow_back_service_serial","adzc02");
            break;
          }
          break;
        case "3":
          switch(sumary){
            case "lunch_and_dinner_summary":
              add_ons_dropdown(encabezado,"$180 /night", input,"18000", check_box, purchase_amount, sumary,"Lunch And Dinner <br>(3 persons)<span>$180 /night</span>","#lunch_and_dinner_serial","adld03");
            break;
            case "transport_summary":
              add_ons_dropdown(encabezado,"$75 one-time", input,"7500", check_box, purchase_amount, sumary,"Transport <br>(3 persons)<span>$75 one-time</span>","#transport_serial","adtp03");
            break;
            case "tow_back_service_summary":
              add_ons_dropdown(encabezado,"$90 one-time", input,"9000", check_box, purchase_amount, sumary,"Tow back service <br>(3 persons)<span>$90 one-time</span>","#tow_back_service_serial","adzc03");
            break;
          }
        break;
        case "4":
          switch(sumary){
            case "lunch_and_dinner_summary":
              add_ons_dropdown(encabezado,"$240 /night", input,"24000", check_box, purchase_amount, sumary,"Lunch And Dinner <br>(4 persons)<span>$240 /night</span>","#lunch_and_dinner_serial","adld04");
            break;
            case "transport_summary":
              add_ons_dropdown(encabezado,"$100 one-time", input,"10000", check_box, purchase_amount, sumary,"Transport <br>(4 persons)<span>$100 one-time</span>","#transport_serial","adtp04");
            break;
            case "tow_back_service_summary":
              add_ons_dropdown(encabezado,"$120 one-time", input,"12000", check_box, purchase_amount, sumary,"Tow back service <br>(4 persons)<span>$120 one-time</span>","#tow_back_service_serial","adzc04");
            break;
          }
        break;
        case "5":
          switch(sumary){
            case "lunch_and_dinner_summary":
              add_ons_dropdown(encabezado,"$300 /night", input,"30000", check_box, purchase_amount, sumary,"Lunch And Dinner <br>(5 persons)<span>$300 /night</span>","#lunch_and_dinner_serial","adld05");
            break;
            case "transport_summary":
              add_ons_dropdown(encabezado,"$100 one-time", input,"10000", check_box, purchase_amount, sumary,"Transport <br>(5 persons)<span>$100 one-time</span>","#transport_serial","adtp05");
            break;
            case "tow_back_service_summary":
              add_ons_dropdown(encabezado,"$150 one-time", input,"15000", check_box, purchase_amount, sumary,"Tow back service <br>(5 persons)<span>$150 one-time</span>","#tow_back_service_serial","adzc05");
            break;
          }
        break;
        case "6":
          switch(sumary){
            case "lunch_and_dinner_summary":
              add_ons_dropdown(encabezado,"$360 /night", input,"36000", check_box, purchase_amount, sumary,"Lunch And Dinner <br>(6 persons)<span>$360 /night</span>","#lunch_and_dinner_serial","adld06");
            break;
            case "transport_summary":
              add_ons_dropdown(encabezado,"$102 one-time", input,"10200", check_box, purchase_amount, sumary,"Transport <br>(6 persons)<span>$102 one-time</span>","#transport_serial","adtp06");
            break;
            case "tow_back_service_summary":
              add_ons_dropdown(encabezado,"$180 one-time", input,"18000", check_box, purchase_amount, sumary,"Tow back service <br>(6 persons)<span>$180 one-time</span>","#tow_back_service_serial","adzc06");
            break;
          }
        break;
        case "7":
          switch(sumary){
            case "lunch_and_dinner_summary":
              add_ons_dropdown(encabezado,"$420 /night", input,"42000", check_box, purchase_amount, sumary,"Lunch And Dinner <br>(7 persons)<span>$420 /night</span>","#lunch_and_dinner_serial","adld07");
            break;
            case "transport_summary":
              add_ons_dropdown(encabezado,"$150 one-time", input,"15000", check_box, purchase_amount, sumary,"Transport <br>(7 persons)<span>$150 one-time</span>","#transport_serial","adtp07");
            break;
            case "tow_back_service_summary":
              add_ons_dropdown(encabezado,"$210 one-time", input,"21000", check_box, purchase_amount, sumary,"Tow back service <br>(7 persons)<span>$210 one-time</span>","#tow_back_service_serial","adzc07");
            break;
          }
        break;
        case "8":
          switch(sumary){
            case "lunch_and_dinner_summary":
              add_ons_dropdown(encabezado,"$480 /night", input,"48000", check_box, purchase_amount, sumary,"Lunch And Dinner <br>(8 persons)<span>$480 /night</span>","#lunch_and_dinner_serial","adld08");
            break;
            case "transport_summary":
              add_ons_dropdown(encabezado,"$162 one-time", input,"16200", check_box, purchase_amount, sumary,"Transport <br>(8 persons)<span>$162 one-time</span>","#transport_serial","adtp08");
            break;
            case "tow_back_service_summary":
              add_ons_dropdown(encabezado,"$240 one-time", input,"24000", check_box, purchase_amount, sumary,"Tow back service <br>(8 persons)<span>$240 one-time</span>","#tow_back_service_serial","adzc08");
            break;
          }
        break;
        case "9":
          switch(sumary){
            case "lunch_and_dinner_summary":
              add_ons_dropdown(encabezado,"$540 /night", input,"54000", check_box, purchase_amount, sumary,"Lunch And Dinner <br>(9 persons)<span>$540 /night</span>","#lunch_and_dinner_serial","adld09");
            break;
            case "transport_summary":
              add_ons_dropdown(encabezado,"$177 one-time", input,"17700", check_box, purchase_amount, sumary,"Transport <br>(9 persons)<span>$177 one-time</span>","#transport_serial","adtp09");
            break;
            case "tow_back_service_summary":
              add_ons_dropdown(encabezado,"$270 one-time", input,"27000", check_box, purchase_amount, sumary,"Tow back service <br>(9 persons)<span>$270 one-time</span>","#tow_back_service_serial","adzc09");
            break;
          }
        break;
        case "10":
          switch(sumary){
            case "lunch_and_dinner_summary":
              add_ons_dropdown(encabezado,"600 /night", input,"60000", check_box, purchase_amount, sumary,"Lunch And Dinner <br>(10 persons)<span>$600 /night</span>","#lunch_and_dinner_serial","adld10");
            break;
            case "transport_summary":
              add_ons_dropdown(encabezado,"$202", input,"20200", check_box, purchase_amount, sumary,"Transport <br>(10 persons)<span>$202 one-time</span>","#transport_serial","adtp10");
            break;
            case "tow_back_service_summary":
              add_ons_dropdown(encabezado,"$300", input,"30000", check_box, purchase_amount, sumary,"Tow back service <br>(10 persons)<span>$300 one-time</span>","#tow_back_service_serial","adzc10");
            break;
          }
        break;
        case "11":
          switch(sumary){
            case "lunch_and_dinner_summary":
              add_ons_dropdown(encabezado,"$660 /night", input,"66000", check_box, purchase_amount, sumary,"Lunch And Dinner <br>(11 persons)<span>$660 /night</span>","#lunch_and_dinner_serial","adld11");
            break;
            case "transport_summary":
              add_ons_dropdown(encabezado,"$202 one-time", input,"20200", check_box, purchase_amount, sumary,"Transport <br>(11 persons)<span>$202 one-time</span>","#transport_serial","adtp11");
            break;
            case "tow_back_service_summary":
              add_ons_dropdown(encabezado,"$330 one-time", input,"33000", check_box, purchase_amount, sumary,"Tow back service <br>(11 persons)<span>$330 one-time</span>","#tow_back_service_serial","adzc11");
            break;
          }
        break;
        case "12":
          switch(sumary){
            case "lunch_and_dinner_summary":
              add_ons_dropdown(encabezado,"$720 /night", input,"72000", check_box, purchase_amount, sumary,"Lunch And Dinner <br>(12 persons)<span>$720 /night</span>","#lunch_and_dinner_serial","adld12");
            break;
            case "transport_summary":
              add_ons_dropdown(encabezado,"$204 one-time", input,"20400", check_box, purchase_amount, sumary,"Transport <br>(12 persons)<span>$204</span>","#transport_serial","adtp12");
            break;
            case "tow_back_service_summary":
              add_ons_dropdown(encabezado,"$360 one-time", input,"36000", check_box, purchase_amount, sumary,"Tow back service <br>(12 persons)<span>$360</span>","#tow_back_service_serial","adzc12");
            break;
          }
        break;
      }
    });
  }

  function hide_divs (rooms_num, div_visible){
    var rooms_input_summary = $("#rooms_input").val();
    for(i=0;i<rooms_num;i++){
      if(i==div_visible) {
        $("#rooms"+i).show();
      }
      else{
        $("#rooms"+i).hide();
      }
    }
    switch(div_visible){
      case 0:
        if(0<rooms_num){
            //$("#step_in_reservation").html("Room 1 of "+num_hab);
            $("#step_in_reservation").html("SELECT YOUR FIRST ROOM");
            $("#first_circle").addClass("active");
          }
          else{
            $("#cont").html($("#contenedor").html());
            $("#add_on").html("");
            $("#form_box_3_container").show();
            showIt('steps_list');
            $("#rooms_input").val(rooms_input_summary);
            cambio_costos_addons("#transport","#transport_checkbox","#encabezado_transport","#transport_input","#purchase_amount", "transport_summary");
            cambio_costos_addons("#tow_back_service","#tow_back_service_checkbox","#encabezado_tow_back_service","#tow_back_service_input","#purchase_amount", "tow_back_service_summary");
            cambio_costos_addons("#lunch_and_dinner","#lunch_and_dinner_checkbox","#encabezado_lunch_and_dinner","#lunch_and_dinner_input" ,"#purchase_amount", "lunch_and_dinner_summary");
            agregar_costos_addons("#add_transport_buttom","#transport_checkbox","#transport_input","#purchase_amount","transport_summary", "#encabezado_transport");
            agregar_costos_addons("#add_tow_back_service_buttom","#tow_back_service_checkbox","#tow_back_service_input","#purchase_amount", "tow_back_service_summary","#encabezado_tow_back_service");
            agregar_costos_addons("#add_lunch_and_dinner_buttom","#lunch_and_dinner_checkbox","#lunch_and_dinner_input","#purchase_amount", "lunch_and_dinner_summary","#encabezado_lunch_and_dinner");
            $("#summary_input").val($("#reserva_summary").html());
            $( "#check_in_date" ).datepicker({
              minDate: new Date(),
              dateFormat: 'dd/mm/yy',
              defaultDate: "+1w",
              changeMonth: true,
              numberOfMonths: 1,
              onClose: function( selectedDate ) {
                $( "#check_out_date" ).datepicker( "option", "minDate", selectedDate );
              }
            });
            $( "#check_out_date" ).datepicker({
              //minDate: new Date(),
              dateFormat: 'dd/mm/yy',
              defaultDate: "+1w",
              changeMonth: true,
              numberOfMonths: 1,
              onClose: function( selectedDate ) {
                $( "#check_in_date" ).datepicker( "option", "maxDate", selectedDate );
              }
            });
          }
          break;
      case 1:
        if(1<rooms_num){
            //$("#step_in_reservation").html("Room 2 of "+num_hab);
            $("#step_in_reservation").html("SELECT YOUR SECOND  ROOM");
            $("#first_circle").removeClass("active");
            $("#second_circle").addClass("active");
          }
          else{
            $("#cont").html($("#contenedor").html());
            $("#add_on").html("");
            $("#form_box_3_container").show();
            showIt('steps_list');
            $("#rooms_input").val(rooms_input_summary);
            cambio_costos_addons("#transport","#transport_checkbox","#encabezado_transport","#transport_input","#purchase_amount", "transport_summary");
            cambio_costos_addons("#tow_back_service","#tow_back_service_checkbox","#encabezado_tow_back_service","#tow_back_service_input","#purchase_amount", "tow_back_service_summary");
            cambio_costos_addons("#lunch_and_dinner","#lunch_and_dinner_checkbox","#encabezado_lunch_and_dinner","#lunch_and_dinner_input" ,"#purchase_amount", "lunch_and_dinner_summary");
            agregar_costos_addons("#add_transport_buttom","#transport_checkbox","#transport_input","#purchase_amount","transport_summary", "#encabezado_transport");
            agregar_costos_addons("#add_tow_back_service_buttom","#tow_back_service_checkbox","#tow_back_service_input","#purchase_amount", "tow_back_service_summary","#encabezado_tow_back_service");
            agregar_costos_addons("#add_lunch_and_dinner_buttom","#lunch_and_dinner_checkbox","#lunch_and_dinner_input","#purchase_amount", "lunch_and_dinner_summary","#encabezado_lunch_and_dinner");
            $("#summary_input").val($("#reserva_summary").html());
            $( "#check_in_date" ).datepicker({
              minDate: new Date(),
              dateFormat: 'dd/mm/yy',
              defaultDate: "+1w",
              changeMonth: true,
              numberOfMonths: 1,
              onClose: function( selectedDate ) {
                $( "#check_out_date" ).datepicker( "option", "minDate", selectedDate );
              }
            });
            $( "#check_out_date" ).datepicker({
              //minDate: new Date(),
              dateFormat: 'dd/mm/yy',
              defaultDate: "+1w",
              changeMonth: true,
              numberOfMonths: 1,
              onClose: function( selectedDate ) {
                $( "#check_in_date" ).datepicker( "option", "maxDate", selectedDate );
              }
            });
          }
          break;
      case 2:
          if(2<rooms_num){
            //$("#step_in_reservation").html("Room 3 of "+num_hab);
            $("#step_in_reservation").html("SELECT YOUR THIRD ROOM");
            $("#second_circle").removeClass("active");
            $("#third_circle").addClass("active");
          }
          else{
            $("#cont").html($("#contenedor").html());
            $("#add_on").html("");
            $("#form_box_3_container").show();
            showIt('steps_list');
            $("#rooms_input").val(rooms_input_summary);
            cambio_costos_addons("#transport","#transport_checkbox","#encabezado_transport","#transport_input","#purchase_amount", "transport_summary");
            cambio_costos_addons("#tow_back_service","#tow_back_service_checkbox","#encabezado_tow_back_service","#tow_back_service_input","#purchase_amount", "tow_back_service_summary");
            cambio_costos_addons("#lunch_and_dinner","#lunch_and_dinner_checkbox","#encabezado_lunch_and_dinner","#lunch_and_dinner_input" ,"#purchase_amount", "lunch_and_dinner_summary");
            agregar_costos_addons("#add_transport_buttom","#transport_checkbox","#transport_input","#purchase_amount","transport_summary", "#encabezado_transport");
            agregar_costos_addons("#add_tow_back_service_buttom","#tow_back_service_checkbox","#tow_back_service_input","#purchase_amount", "tow_back_service_summary","#encabezado_tow_back_service");
            agregar_costos_addons("#add_lunch_and_dinner_buttom","#lunch_and_dinner_checkbox","#lunch_and_dinner_input","#purchase_amount", "lunch_and_dinner_summary","#encabezado_lunch_and_dinner");
            $("#summary_input").val($("#reserva_summary").html());
            $( "#check_in_date" ).datepicker({
              minDate: new Date(),
              dateFormat: 'dd/mm/yy',
              defaultDate: "+1w",
              changeMonth: true,
              numberOfMonths: 1,
              onClose: function( selectedDate ) {
                $( "#check_out_date" ).datepicker( "option", "minDate", selectedDate );
              }
            });
            $( "#check_out_date" ).datepicker({
              //minDate: new Date(),
              dateFormat: 'dd/mm/yy',
              defaultDate: "+1w",
              changeMonth: true,
              numberOfMonths: 1,
              onClose: function( selectedDate ) {
                $( "#check_in_date" ).datepicker( "option", "maxDate", selectedDate );
              }
            });
          }
          break;
      case 3:
          if(3<rooms_num){
            //$("#step_in_reservation").html("Room 4 of "+num_hab);
            $("#step_in_reservation").html("SELECT YOUR FOURT ROOM");
            $("#third_circle").removeClass("active");
            $("#fourth_circle").addClass("active");
          }
          else{
            $("#cont").html($("#contenedor").html());
            $("#add_on").html("");
            $("#form_box_3_container").show();
            showIt('steps_list');
            $("#rooms_input").val(rooms_input_summary);
            cambio_costos_addons("#transport","#transport_checkbox","#encabezado_transport","#transport_input","#purchase_amount", "transport_summary");
            cambio_costos_addons("#tow_back_service","#tow_back_service_checkbox","#encabezado_tow_back_service","#tow_back_service_input","#purchase_amount", "tow_back_service_summary");
            cambio_costos_addons("#lunch_and_dinner","#lunch_and_dinner_checkbox","#encabezado_lunch_and_dinner","#lunch_and_dinner_input" ,"#purchase_amount", "lunch_and_dinner_summary");
            agregar_costos_addons("#add_transport_buttom","#transport_checkbox","#transport_input","#purchase_amount","transport_summary", "#encabezado_transport");
            agregar_costos_addons("#add_tow_back_service_buttom","#tow_back_service_checkbox","#tow_back_service_input","#purchase_amount", "tow_back_service_summary","#encabezado_tow_back_service");
            agregar_costos_addons("#add_lunch_and_dinner_buttom","#lunch_and_dinner_checkbox","#lunch_and_dinner_input","#purchase_amount", "lunch_and_dinner_summary","#encabezado_lunch_and_dinner");
            $("#summary_input").val($("#reserva_summary").html());
            $( "#check_in_date" ).datepicker({
              minDate: new Date(),
              dateFormat: 'dd/mm/yy',
              defaultDate: "+1w",
              changeMonth: true,
              numberOfMonths: 1,
              onClose: function( selectedDate ) {
                $( "#check_out_date" ).datepicker( "option", "minDate", selectedDate );
              }
            });
            $( "#check_out_date" ).datepicker({
              //minDate: new Date(),
              dateFormat: 'dd/mm/yy',
              defaultDate: "+1w",
              changeMonth: true,
              numberOfMonths: 1,
              onClose: function( selectedDate ) {
                $( "#check_in_date" ).datepicker( "option", "maxDate", selectedDate );
              }
            });
          }
          break;
      case 4:
          $("#cont").html($("#contenedor").html());
          $("#add_on").html("");
          $("#form_box_3_container").show();
          showIt('steps_list');
          $("#rooms_input").val(rooms_input_summary);
          cambio_costos_addons("#transport","#transport_checkbox","#encabezado_transport","#transport_input","#purchase_amount", "transport_summary");
            cambio_costos_addons("#tow_back_service","#tow_back_service_checkbox","#encabezado_tow_back_service","#tow_back_service_input","#purchase_amount", "tow_back_service_summary");
            cambio_costos_addons("#lunch_and_dinner","#lunch_and_dinner_checkbox","#encabezado_lunch_and_dinner","#lunch_and_dinner_input" ,"#purchase_amount", "lunch_and_dinner_summary");
            agregar_costos_addons("#add_transport_buttom","#transport_checkbox","#transport_input","#purchase_amount","transport_summary", "#encabezado_transport");
            agregar_costos_addons("#add_tow_back_service_buttom","#tow_back_service_checkbox","#tow_back_service_input","#purchase_amount", "tow_back_service_summary","#encabezado_tow_back_service");
            agregar_costos_addons("#add_lunch_and_dinner_buttom","#lunch_and_dinner_checkbox","#lunch_and_dinner_input","#purchase_amount", "lunch_and_dinner_summary","#encabezado_lunch_and_dinner");
          $("#summary_input").val($("#reserva_summary").html());
          $( "#check_in_date" ).datepicker({
            minDate: new Date(),
            dateFormat: 'dd/mm/yy',
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 1,
            onClose: function( selectedDate ) {
              $( "#check_out_date" ).datepicker( "option", "minDate", selectedDate );
            }
          });
          $( "#check_out_date" ).datepicker({
            //minDate: new Date(),
            dateFormat: 'dd/mm/yy',
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 1,
            onClose: function( selectedDate ) {
              $( "#check_in_date" ).datepicker( "option", "maxDate", selectedDate );
            }
          });
          break; 
    }
  }
</script>
{/exp:get_post_vars}